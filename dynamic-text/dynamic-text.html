<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Allied Dynamic Open House Dates</title>
</head>
<body>

<!-- Course Info Text Container -->
<p class="course-info-text"></p>
<p class="course-info-text"></p>
<p class="course-info-text"></p>
<p class="course-info-text"></p>


<script>

  //*** DATA ***//
  const courseInfo1 = [
    { 
      courseDate1: new Date('5/8/2022'),
      courseDate2: new Date('6/12/2022'),
      time: '12:00 PM to 2:00 PM'
    },
    {
      courseDate1: new Date('6/18/2022'),
      courseDate2: false,
      time: '11:00 AM to 1:00 PM'
    }
  ];
  
  const courseInfo2 = [
    { 
      courseDate1: new Date('7/8/2022'),
      courseDate2: new Date('8/12/2022'),
      time: '12:00 PM to 4:00 PM'
    },
    {
      courseDate1: new Date('9/18/2022'),
      courseDate2: false,
      time: '11:00 AM to 3:00 PM'
    }
  ];
  
  const courseInfo3 = [
    { 
      courseDate1: new Date('4/8/2022'),
      courseDate2: new Date('6/12/2022'),
      time: '12:00 PM to 2:00 PM'
    },
    {
      courseDate1: new Date('6/18/2022'),
      courseDate2: false,
      time: '11:00 AM to 1:00 PM'
    }
  ];
  
  const courseInfo4 = [
    { 
      courseDate1: new Date('4/8/2022'),
      courseDate2: new Date('8/12/2022'),
      time: '12:00 PM to 4:00 PM'
    },
    {
      courseDate1: new Date('9/18/2022'),
      courseDate2: false,
      time: '11:00 AM to 3:00 PM'
    }
  ];

  // Get months, names, date
  const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
  const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
  const now = new Date();
  
  const courseInfoTextContainer = document.querySelectorAll('.course-info-text');

  // Filter data into new array of upcoming courses
  const futureCourses1 = courseInfo1.filter(course => now < course.courseDate1);
  const futureCourses2 = courseInfo2.filter(course => now < course.courseDate1);
  const futureCourses3 = courseInfo3.filter(course => now < course.courseDate1);
  const futureCourses4 = courseInfo4.filter(course => now < course.courseDate1);

  // Update page content
  const updateCourseInfoText = function(array, htmlContainer) {  
    array.forEach((nextCourse, index) => {
      if (index > 0) return; // Set limit for number of entries

        const markup = `
          <span>Este taller se dictará 
            ${nextCourse.courseDate2 ? 'los días' : 'el día'}
        
            ${dayNames[nextCourse.courseDate1.getDay()]}
            ${nextCourse.courseDate1.getDate()}

            ${nextCourse.courseDate2 ? ' y ' + dayNames[nextCourse.courseDate2.getDay()] : ''}
            ${nextCourse.courseDate2 ? nextCourse.courseDate2.getDate() : ''}

            ${monthNames[nextCourse.courseDate1.getMonth()]}
            de 
            ${nextCourse.time}.
          </span>
        `; 

      // Inject markup onto page
      htmlContainer.insertAdjacentHTML('beforeend', markup);

    });

  };
  
  // Run updateCourseInfoText() to inject course data onto web page text
  courseInfoTextContainer.forEach(function(textContainer, index) {
    updateCourseInfoText(eval('futureCourses' + (index + 1)), courseInfoTextContainer[index])
  });

</script>
  
</body>
</html>